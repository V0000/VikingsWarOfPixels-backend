# Настройка автоматической авторизации

## Что было изменено

1. **Удалена авторизация через Discord** - больше не требуется настройка Discord бота
2. **Автоматическая авторизация** - пользователи теперь авторизуются автоматически при посещении сайта
3. **Гостевые аккаунты** - создаются автоматически с префиксом "Guest_"

## Изменения в файлах

### Удаленные файлы:
- `src/helpers/AuthHelper.ts` - больше не нужен для Discord авторизации

### Измененные файлы:
- `src/routes/login.ts` - теперь создает гостевые аккаунты
- `src/routes/root.ts` - автоматически авторизует пользователей при посещении корневого маршрута
- `src/config.ts` - убрана конфигурация Discord
- `src/models/MongoUser.ts` - обновлены типы (DiscordUserId -> UserId)
- `src/helpers/LoggingHelper.ts` - добавлен метод "Auto" для логирования

## Переменные окружения

Теперь вам нужно только эти переменные в `.env` файле:

```env
DATABASE=mongodb://localhost:27017/pixelbattle
FRONTEND_URL=https://your-frontend-domain.com
```

## Как это работает

1. Когда пользователь заходит на сайт (маршрут `/`), система проверяет наличие токена в куках
2. Если токена нет, создается новый гостевой аккаунт с уникальным ID
3. Система также проверяет существующих пользователей по IP адресу
4. Пользователь автоматически получает токен и перенаправляется на фронтенд

## Преимущества

- ✅ Нет необходимости в Discord боте
- ✅ Простая настройка
- ✅ Пользователи авторизуются мгновенно
- ✅ Сохранение прогресса по IP адресу
- ✅ Безопасные токены с UUID

## Запуск

```bash
npm install
npm run dev
```

Теперь пользователи будут автоматически авторизованы при посещении вашего сайта! 